(function(){function p(){$(".s7dm-dynamic-media").each(function(){var a=$(this),e=a.attr("id"),b=S7dmUtils[e],d=a.data("asset-type"),c=a.data("mode"),h=a.data("stagesize");"undefined"!=typeof b&&null!=b&&(b.dispose(),S7dmUtils[e]=null,a.removeClass("s7responsiveViewer"));a.html("");if(b=a.data("viewer-type")){d=a.data("asset-path");c=a.data("asset-type");var k=a.data("viewer-type"),l=a.data("imageserver"),g=a.data("videoserver"),p=a.data("contenturl"),f=a.data("config"),n=a.data("wcmdisabled"),m=
a.data("stagesize"),r=a.data("viewermodifiers"),q=a.data("dms7");l={asset:d,serverurl:l,contenturl:p};r&&$.extend(l,t(r));(n=!n&&""!=n)&&(l.asset+="?cache\x3doff");m&&(l.stagesize=m);"FlyoutViewer"==k&&(l.imagereload="1,breakpoint,100;320;480");0!=d.indexOf("/")&&(l.aemmode="0");if(0<=k.indexOf("Video")||0<=k.indexOf("Mixed"))if(l.videoserverurl=g,"video"==c||"undefined"!=typeof q&&n)l.playback="native",l.progressivebitrate="20000";"undefined"!=typeof f&&0<f.length&&(d=f.split("|")[0],l.config=d);
d={containerId:a.attr("id"),params:l};"FlyoutViewer"==b&&h||a.addClass("s7responsiveViewer");b=new s7viewers[b](d);"undefined"!=typeof Granite&&"undefined"!=typeof Granite.I18n&&b.setLocalizedTexts(u());S7dmUtils[e]=b;b.init()}else"image"===d&&(a.data("breakpoints")||"smartcrop"==c?(g=a.data("imagepreset"),m=a.data("imageserver"),c=a.data("linkurl"),k=a.data("linktarget"),b=a.data("title"),d=a.data("alt"),f=a.data("urlmodifiers"),e=$("\x3cdiv\x3e",{"class":"s7responsiveContainer"}),h=a.attr("id")+
"_resp",m={id:h,src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","data-src":m+a.data("asset-path"),"class":"fluidimage","data-mode":a.data("mode"),"data-breakpoints":a.data("breakpoints"),"data-aspectratio":a.data("aspectratio")},g&&(m["data-src"]+="?$"+g+"$"),f&&(m["data-src"]+=(g?"\x26":"?")+f),g=$("\x3cimg\x3e",m),c?(c={href:c,target:k},d?(c.alt=d,c.title=d,g.attr("alt",d)):g.attr("alt",""),b&&(c.title=b),b=$("\x3ca\x3e",c),b.append(g),e.append(b)):(d?g.attr("alt",
d):g.attr("alt",""),e.append(g)),a.append(e),s7responsiveImage(document.getElementById(h))):(c=a.data("stagesize"),b=a.data("linkurl"),d=a.data("linktarget"),e=a.data("title"),h=a.data("alt"),k=a.data("imagepreset"),f=a.data("imageserver"),g=a.data("urlmodifiers"),f={src:f+a.data("asset-path")},k&&(f.src+="?$"+k+"$"),g&&(f.src+=(k?"\x26":"?")+g),c&&(c=c.split(","),f.width=c[0],1<c.length&&(f.height=c[1])),c=$("\x3cimg\x3e",f),b?(b={href:b,target:d},h&&(b.alt=h,b.title=h,c.attr("alt",h)),e&&(b.title=
e),e=$("\x3ca\x3e",b),e.append(c),a.append(e)):(h&&c.attr("alt",h),a.append(c))))})}function q(){console.log("S7Viewer is missing")}function t(a){var e={};if(a){a=a.split("\x26");for(var b=0;b<a.length;b++)if(0<a[b].indexOf("\x3d")){var d=a[b].substring(0,a[b].indexOf("\x3d")),c=a[b].substring(a[b].indexOf("\x3d")+1);e[d]=c}}return e}function u(){var a={},e=Granite.I18n.getLocale(),b=s7sdk_i18n.localizedText,d={},c;for(c in b){var h=b[c],k;for(k in h)d[c+"."+k]=h[k]}a[e]=d;a.defaultLocale=Granite.I18n.getLocale();
return a}var v={BasicZoomViewer:"html5/js/BasicZoomViewer.js",FlyoutViewer:"html5/js/FlyoutViewer.js",MixedMediaViewer:"html5/js/MixedMediaViewer.js",SpinViewer:"html5/js/SpinViewer.js",VideoViewer:"html5/js/VideoViewer.js",ZoomViewer:"html5/js/ZoomViewer.js",ZoomVerticalViewer:"html5/js/ZoomVerticalViewer.js",Responsive:"libs/responsive_image.js"};$(document).ready(function(){if(0<$(".s7dm-dynamic-media").length){var a=new S7dmUtils.Viewer,e=$(".s7dm-dynamic-media").data("viewer-path"),b=$(".s7dm-dynamic-media").data("page-locale"),
d="/libs/dam/components/scene7/common/clientlibs/i18n.js";"undefined"!=typeof Granite&&"undefined"!=typeof Granite.I18n&&(Granite.I18n.setLocale(b),d=Granite.HTTP.externalize(d));$("head").append('\x3cscript type\x3d"text/javascript" src\x3d"'+d+'"\x3e\x3c/script\x3e');a.load(v,e).ready({success:p,fail:q})}})}).call(this);